{% extends "user_template.html" %}

<html>

<head>
    {%block head%}
        {{super()}}
        {% block css %}
        <style>
            .tab .create{
                float:right;
            }

            /* Notice styling */
            div.notice {
                margin: 1rem auto;
                width: 70%;
                border: 1px solid black;
                border-top-left-radius: 10px;


                background-color: var(--noticebg);

                display:flex;
                flex-direction: column;
                justify-content: center;
                overflow: hidden;
            }

            /* there is an inline style tag doing a box shadow here */
            span.header-title {
                /* Forces span to adhere to margin and padding */
                /* https://stackoverflow.com/questions/10666032/why-does-span-break-outside-div-when-margin-and-padding-is-applied */
                display: inline-block;

                text-align: left;

                font-size: 50px;
                padding-left: .2rem;
                margin-left: .4rem;
            }

            div.header-details {
                margin: .4rem .6rem .3rem .8rem;

                padding-bottom: 1rem;

                border-bottom: 1px solid var(--border);

                color: var(--headercolour);
            }
            span.notice-date {
                float: right;
                margin-right: .2rem;
            }
            div.content {
                margin-left: .6rem;
                margin-right: .6rem;

                border-bottom: 1px solid var(--border);

                margin-bottom: 1rem;
            }
            div.attachments {
                display: flex;
                flex-direction: column;
            }
            div.notice div.attachments div.image {
                width: 100%;
                text-align: center;
                padding: .9rem 0;
                margin: .5rem auto;

                border-top: 1px solid var(--border);
            }

            div.attachments ul.files {
                border-top: 1px solid var(--border);
            }
            div.attachments ul.files li {
                margin: .5rem 2rem;

                cursor: pointer;

                color: var(--linkcolour);
            }
        </style>    
        
        {% endblock %}
    {%endblock%}
</head>

<div id="main">
    {%block main%}
        <!-- Title section -->
        <div id="title">
            <div id="menu"><i class="fa-solid fa-bars" onclick="hideSidenav()"></i></div>
            <h1><i class="fa-solid fa-radio"></i><br>Notices</h1>
        </div>
        <!-- Tab section -->

        {% if current_user.is_tutor == 1 %}
        <div class="tab">
            <button class="tablinks" onclick="openTab(event, 'notices')">Notices</button>
            <button class="tablinks create" onclick="openTab(event, 'create-notice')">Create New Notice</button>
        </div>


        <!-- Create notice tab, only visible to tutors -->
        <div class="tabcontent" id="create-notice">
            making up something@
        </div>
        {% endif %}


        <!-- Notice display tab -->
         <!-- make sure to add delete button on posts for tutors -->
        <div 
            {% if current_user.is_tutor ==1 %} class="tabcontent" {% endif %} 
            id="notices">
            <!-- example format of a notice -->
            <div class="notice">
                <div class="header">
                    <span class="header-title" style="box-shadow: -.5rem 0px 0px 0px var(--unimportant);">
                        Really just some chill guy having a pretty cool title, yeah.
                    </span>
                    <div class="header-details">
                        <span class="notice-poster">Made by ME</span>
                        <span class="notice-date">Posted HERE and NOW</span>
                    </div>
                </div>
                <div class="content">
                    Yo! this is some sick content, yo!


                    <div class="attachments">
                        <div class="image">
                            <img src="{{url_for('static', filename='assets/fumo.svg')}}" height="400px">                       
                        </div>
                        <ul class="files">
                            <li><i class="fa-solid fa-paperclip"></i> this isa file</li>
                            <li><i class="fa-solid fa-paperclip"></i> Here's another one</li>
                            <li><i class="fa-solid fa-paperclip"></i> 3rd time's the charm!</li>
                        </ul>                 
                    </div>

                </div>


            </div>
        </div>





    {%endblock%}
</div>
{% block js %}
{{ super() }}
<script>

    // Highlights navbar tab that user is on
        const sidebarItem = document.querySelector('.nav-notices');
        sidebarItem.classList.toggle('active'); //toggling home tab

    // Opens relevant tab from the tab bar.
        function openTab(evt, tabName) {
            // Declare all variables
            var i, tabcontent, tablinks;

            // Get all elements with class="tabcontent" and hide them
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }

            // Get all elements with class="tablinks" and remove the class "active"
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }

            // Show the current tab, and add an "active" class to the button that opened the tab
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        document.addEventListener('DOMContentLoaded', () => { //load first tab on page load, courtesy of chatgpt
            document.querySelector('.tablinks').click();
        });
</script>
{% endblock %}
</html>